<!--
  Generated template for the PublishPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>

    <ion-title>Publicar Articulos</ion-title>
    <ion-buttons right>
      <button ion-button menuToggle>
        <ion-icon name="menu"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>

</ion-header>


<ion-content padding>

  <form [formGroup]="myForm" (ngSubmit)="saveData()">
    <div style="overflow-y: scroll; height:400px;">
      <ion-list >
        <ion-row>
          <ion-input class="campos-publicar" formControlName="titulo" type="text" [(ngModel)]="article.titulo" placeholder="Titulo"></ion-input>
        </ion-row>
        <ion-item *ngIf="myForm.get('titulo').errors && myForm.get('titulo').dirty">
          <p color="danger" ion-text *ngIf="myForm.get('titulo').hasError('required')">El campo titulo es requerido</p>
        </ion-item> 
        <ion-item class="campos-textpublicar">
          <!--<ion-input formControlName="descripcion" type="text" [(ngModel)]="article.descripcion" placeholder="Descripcion del articulo"></ion-input>-->
          <ion-textarea class="campos-textpublicar2" formControlName="descripcion" style="background-color: #F2F2F2;" #myInput id="myInput" rows="5" maxLength="500"
            [(ngModel)]="article.descripcion" placeholder="Descripcion del articulo"></ion-textarea>
        </ion-item>
        <ion-item *ngIf="myForm.get('descripcion').errors && myForm.get('descripcion').dirty">
          <p color="danger" ion-text *ngIf="myForm.get('descripcion').hasError('required')">El campo Descripcion es requerido</p>
        </ion-item>
        <ion-item class ="campos-publicar2">
          <ion-label>Categoria</ion-label>
          <ion-select formControlName="categoria" [(ngModel)]="article.categoria">
            <ion-option>Hogar y muebles</ion-option>
            <ion-option>Electrodomésticos</ion-option>
            <ion-option>Accesorios para vehículos</ion-option>
            <ion-option>Tecnología</ion-option>
            <ion-option>Inmuebles</ion-option>
            <ion-option>Accesorios personales</ion-option>
            <ion-option>Entretenimiento y videojuegos</ion-option>
            <ion-option>Industria</ion-option>
          </ion-select>
        </ion-item>
        <ion-item class ="campos-publicar2">
          <ion-label>Categorias de cambio</ion-label>
          <ion-select formControlName="categorias" [(ngModel)]="article.categorias" multiple="true">
            <ion-option>Hogar y muebles</ion-option>
            <ion-option>Electrodomésticos</ion-option>
            <ion-option>Accesorios para vehículos</ion-option>
            <ion-option>Tecnología</ion-option>
            <ion-option>Inmuebles</ion-option>
            <ion-option>Accesorios personales</ion-option>
            <ion-option>Entretenimiento y videojuegos </ion-option>
            <ion-option>Industria</ion-option>
          </ion-select>
        </ion-item>
        <ion-item class ="campos-publicar2">
          <ion-label>Rango precio</ion-label>
          <ion-select formControlName="rango" [(ngModel)]="article.rango">
            <ion-option value="1">0-500.000</ion-option>
            <ion-option value="2">500.000-1.000.000</ion-option>
            <ion-option value="3">1.000.000-2.000.000</ion-option>
            <ion-option value="4">2.000.000 o mayor</ion-option>
          </ion-select>
        </ion-item>

        <!-- <ion-item>
                <ion-icon name="image" item-left></ion-icon>
                <ion-label stacked>Imagen:</ion-label>
                <ion-input formControlName="imagen" type="file" [(ngModel)]="article.imageUrl" placeholder="Imagen del articulo"></ion-input>
              </ion-item>
              <ion-item *ngIf="myForm.get('imagen').errors && myForm.get('imagen').dirty">
                <p color="danger" ion-text *ngIf="myForm.get('imagen').hasError('required')">El campo Imagen es requerido</p>
              </ion-item> -->



        <ion-item class ="campos-publicar3" >
          
		<ion-icon name="image" item-left></ion-icon>
          <input style="color:#ffff;"  type="file" formControlName="imagen" multiple="true" (click)="alertaPrueba()" (change)="onImageChange()" [(ngModel)]="article.file" name="subir"
            value="" id="mainImage"
			>
        </ion-item>
        <ion-item *ngIf="myForm.get('imagen').errors && myForm.get('imagen').dirty">
          <p color="danger" ion-text *ngIf="myForm.get('imagen').hasError('required')">El campo Imagen es requerido</p>
        </ion-item>
        <div *ngIf="myForm.get('imagen').errors && myForm.get('imagen').dirty">
          <p color="danger" ion-text *ngIf="validationImage(article.imageUrl)">se debe subir al menos una imagen</p>
        </div>
        <ion-row>
          <ion-col *ngFor="let imagen of bigImg" col-4>
            <ion-item *ngIf="bigImg.length > 0" style="border-bottom: 0px solid #ccc;">
              <div style="height:80px;width: 80;">
                <img style="max-width: 100%;max-height: 100%; margin:auto;display:block;width: 100%;height: 100%;" src="{{imagen}}">-->
              </div>
            </ion-item>
          </ion-col>
        </ion-row>


        <!--  (click)="publish(article)"  <progress></progress>-->
      </ion-list>
    </div>
    <div padding>
      <button ion-button block class="boton-publicar" (click)="publish(article)" [disabled]="myForm.invalid" >Guardar</button>
    </div>
  </form>


</ion-content>