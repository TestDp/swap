{"version":3,"sources":["../../src/pages/register/register.module.ts","../../src/pages/register/register.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACN;AAa1C,IAAa,kBAAkB;IAA/B;IAAiC,CAAC;IAAD,yBAAC;AAAD,CAAC;AAArB,kBAAkB;IAX9B,sFAAQ,CAAC;QACR,YAAY,EAAE;YACZ,+DAAY;SACb;QACD,OAAO,EAAE;YACP,sEAAe,CAAC,QAAQ,CAAC,+DAAY,CAAC;SACvC;QACD,OAAO,EAAE;YACP,+DAAY;SACb;KACF,CAAC;GACW,kBAAkB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACfqC;AAC1B;AACgC;AACU;AAEhC;AACJ;AAUhD,IAAa,YAAY;IASvB,sBACU,MAAuB,EACxB,OAAsB,EACtB,SAA0B,EAC1B,WAAwB,EACxB,EAAuB,EACvB,OAAc;QALb,WAAM,GAAN,MAAM,CAAiB;QACxB,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAiB;QAC1B,gBAAW,GAAX,WAAW,CAAa;QACxB,OAAE,GAAF,EAAE,CAAqB;QACvB,YAAO,GAAP,OAAO,CAAO;QAZvB,SAAI,GAAG,EAAU,CAAC;QAehB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QAClC,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IAE9C,CAAC;IAID,+BAAQ,GAAR;QACE,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IACjC,CAAC;IAGO,mCAAY,GAApB;QACE,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;YAC5B,IAAI,EAAE,CAAC,EAAE,EAAE,CAAC,kEAAU,CAAC,QAAQ,CAAC,CAAC;YACjC,QAAQ,EAAE,CAAC,EAAE,EAAE,kEAAU,CAAC,QAAQ,CAAC;YACnC,KAAK,EAAE,CAAC,EAAE,EAAE,CAAC,kEAAU,CAAC,QAAQ,EAAE,kEAAU,CAAC,KAAK,CAAC,CAAC;YACpD,SAAS,EAAE,CAAC,EAAE,EAAE,kEAAU,CAAC,QAAQ,CAAC;YACpC,aAAa,EAAE,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;gBACpC,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC,kEAAU,CAAC,QAAQ,EAAE,kEAAU,CAAC,OAAO,CAAC,6BAA6B,CAAC,CAAC,CAAC;gBACxF,oBAAoB,EAAE,CAAC,EAAE,EAAE,CAAC,kEAAU,CAAC,QAAQ,EAAE,kEAAU,CAAC,OAAO,CAAC,6BAA6B,CAAC,CAAC,CAAC;aACrG,EAAE,EAAE,WAAW,EAAE,IAAI,CAAC,iBAAiB,CAAC,UAAU,EAAE,sBAAsB,CAAC,EAAE,CAAC;YAC/E,MAAM,EAAE,CAAC,EAAE,EAAE,kEAAU,CAAC,QAAQ,CAAC;SAClC,CAAC,CAAC;IACL,CAAC;IAID,wCAAiB,GAAjB,UAAkB,WAAmB,EAAE,kBAA0B;QAC/D,MAAM,CAAC,UAAC,KAAgB;YACtB,IAAI,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YAC3C,IAAI,eAAe,GAAG,KAAK,CAAC,QAAQ,CAAC,kBAAkB,CAAC,CAAC;YAEzD,EAAE,CAAC,CAAC,QAAQ,CAAC,KAAK,KAAK,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC;gBAC7C,MAAM,CAAC;oBACL,mBAAmB,EAAE,IAAI;iBAC1B,CAAC;YACJ,CAAC;QACH,CAAC;IACH,CAAC;IAEK,+BAAQ,GAAd,UAAe,IAAU;;;;gBAEvB,IAAI,CAAC;oBACH,yBAAyB;oBAC1B,4CAA4C;oBAC3C,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,8BAA8B,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC;yBACvE,IAAI,CAAC,iBAAO;wBACX,qDAAqD;wBACrD,uCAAuC;wBACvC,sDAAsD;wBACtD,mCAAmC;wBACnC,qDAAqD;wBACrD,+BAA+B;wBAC/B,qCAAqC;wBACrC,6BAA6B;wBAC7B,iDAAiD;wBACjD,+BAA+B;wBAC/B,sBAAsB;wBACtB,gCAAgC;wBAChC,4CAA4C;wBAC5C,YAAY;wBACZ,2BAA2B;wBAC3B,QAAQ;wBACR,QAAQ;wBACR,MAAM;wBACR,sBAAsB;wBAClB,KAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC;4BACrB,MAAM,EAAE,IAAI,CAAC,MAAM;4BACnB,SAAS,EAAE,IAAI,CAAC,SAAS;4BACzB,KAAK,EAAE,IAAI,CAAC,KAAK;4BACjB,eAAe,EAAE,IAAI,CAAC,eAAe;4BACrC,MAAM,EAAE,IAAI,CAAC,MAAM;4BACnB,MAAM,EAAE,GAAG;yBACZ,CAAC,CAAC,IAAI,CAAC,iBAAO;4BACb,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;wBACnC,CAAC,CAAC,CAAC;wBACV,IAAI;oBACL,CAAC,CAAC,CAAC,KAAK,CAAC,WAAC;wBACR,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,IAAI,yDAAyD,CAAC,CAAC,CAAC;4BAC3E,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gCACpB,KAAK,EAAE,qBAAqB;gCAC5B,QAAQ,EAAE,iBAAiB;gCAC3B,OAAO,EAAE,CAAC,mBAAmB,CAAC;6BAC/B,CAAC,CAAC,OAAO,EAAE,CAAC;4BACb,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;wBACrC,CAAC;oBACH,CAAC,CAAC,CAAC;gBACP,CAAC;gBACD,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACT,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;oBACpB,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,2BAA2B,CAAC,CAAC,CAAC;wBAC3C,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;4BACpB,KAAK,EAAE,qBAAqB;4BAC5B,QAAQ,EAAE,iBAAiB;4BAC3B,OAAO,EAAE,CAAC,mBAAmB,CAAC;yBAC/B,CAAC,CAAC,OAAO,EAAE,CAAC;oBACf,CAAC;gBACH,CAAC;;;;KACF;IAED,qCAAc,GAAd;QACE,OAAO,CAAC,GAAG,CAAC,6BAA6B,CAAC,CAAC;IAC7C,CAAC;IAGH,mBAAC;AAAD,CAAC;AA5HY,YAAY;IANxB,uFAAS,EAAE;IACX,wFAAS,CAAC;QACT,QAAQ,EAAE,eAAe;OACG;KAC7B,CAAC;6EAYiC;QACf,sEAAa;QACX,oEAAe;QACb,kFAAW;QACpB,mEAAmB;QACd,KAAK;AA6GxB;SA5HY,YAAY,e","file":"3.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { RegisterPage } from './register';\n\n@NgModule({\n  declarations: [\n    RegisterPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(RegisterPage),\n  ],\n  exports: [\n    RegisterPage\n  ]\n})\nexport class RegisterPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/register/register.module.ts","import { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, AlertController } from 'ionic-angular';\nimport { FirebaseListObservable, AngularFireDatabase } from 'angularfire2/database';\nimport { User } from \"../../models/user\";\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { MyApp } from \"../../app/app.component\";\n\n\n\n@IonicPage()\n@Component({\n  selector: 'page-register',\n  templateUrl: 'register.html',\n})\n\nexport class RegisterPage {\n\n  myForm: FormGroup;\n  user = {} as User;\n  registrarUsuario: FirebaseListObservable<any>;\n\n\n\n\n  constructor(\n    private afAuth: AngularFireAuth,\n    public navCtrl: NavController,\n    public alertCtrl: AlertController,\n    public formBuilder: FormBuilder,\n    public af: AngularFireDatabase,\n    public appmain: MyApp,\n\n  ) {\n    this.myForm = this.createMyForm();\n    this.registrarUsuario = af.list('/usuario');\n\n  }\n\n\n\n  saveData() {\n    console.log(this.myForm.value);\n  }\n\n\n  private createMyForm() {\n    return this.formBuilder.group({\n      name: ['', [Validators.required]],\n      lastName: ['', Validators.required],\n      email: ['', [Validators.required, Validators.email]],\n      dateBirth: ['', Validators.required],\n      passwordRetry: this.formBuilder.group({\n        password: ['', [Validators.required, Validators.pattern(\".*\\\\S.*[a-zA-z0-9_-].{8,12}\")]],\n        passwordConfirmation: ['', [Validators.required, Validators.pattern(\".*\\\\S.*[a-zA-z0-9_-].{8,12}\")]]\n      }, { 'validator': this.matchingPasswords('password', 'passwordConfirmation') }),\n      gender: ['', Validators.required],\n    });\n  }\n\n\n\n  matchingPasswords(passwordKey: string, confirmPasswordKey: string) {\n    return (group: FormGroup): { [key: string]: any } => {\n      let password = group.controls[passwordKey];\n      let confirmPassword = group.controls[confirmPasswordKey];\n\n      if (password.value !== confirmPassword.value) {\n        return {\n          mismatchedPasswords: true\n        };\n      }\n    }\n  }\n\n  async register(user: User) {\n\n    try {\n      //var noEsUsuario = true;\n     // var minUser = (user.email).toLowerCase();\n      this.afAuth.auth.createUserWithEmailAndPassword(user.email, user.password)\n        .then(userAut => {\n          // this.registrarUsuario.subscribe(ListaUsuarios => {\n          //   ListaUsuarios.forEach(usuario => {\n          //     var minUsuario = (usuario.email).toLowerCase();\n          //     if (minUsuario == minUser) {\n          //       this.registrarUsuario.update(usuario.$key, {\n          //         nombre: user.nombre,\n          //         apellidos: user.apellidos,\n          //         email: user.email,\n          //         fechaNacimiento: user.fechaNacimiento,\n          //         genero: user.genero,\n          //         estado: \"A\"\n          //       }).then(userUpdate => {\n          //         this.navCtrl.setRoot('HomePage');\n          //       });\n          //       noEsUsuario=false;\n          //     }\n          //   });\n          // });\n        //  if (noEsUsuario) {\n            this.registrarUsuario.push({\n                  nombre: user.nombre,\n                  apellidos: user.apellidos,\n                  email: user.email,\n                  fechaNacimiento: user.fechaNacimiento,\n                  genero: user.genero,\n                  estado: \"A\"\n                }).then(userNew => {\n                  this.navCtrl.setRoot('HomePage');\n                });\n         // }\n        }).catch(e => {\n          if (e.message == 'The email address is already in use by another account.') {\n            this.alertCtrl.create({\n              title: 'Email ya registrado',\n              subTitle: 'valide el Email',\n              buttons: ['Volver a intentar']\n            }).present();\n            console.log('Email ya registrado');\n          }\n        });\n    }\n    catch (e) {\n      console.log(e.code);\n      if (e.code === 'auth/email-already-in-use') {\n        this.alertCtrl.create({\n          title: 'Email ya registrado',\n          subTitle: 'valide el Email',\n          buttons: ['Volver a intentar']\n        }).present();\n      }\n    }\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad RegisterPage');\n  }\n\n\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/register/register.ts"],"sourceRoot":""}