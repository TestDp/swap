<!--
  Generated template for the PublishPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-title>Publicar Articulos</ion-title>
    <ion-buttons right>
      <button ion-button menuToggle>
        <ion-icon name="menu"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>
<ion-content padding>
  <ion-scroll style="height: 90%;" scrollY="true">
    <form [formGroup]="myForm" (ngSubmit)="saveData()">
      <ion-list>
        <ion-row>
          <ion-col>
            <ion-input class="campos-publicar" formControlName="titulo" type="text" [(ngModel)]="article.titulo" placeholder="Título "></ion-input>
          </ion-col>
        </ion-row>
        <ion-row *ngIf="myForm.get('titulo').errors && myForm.get('titulo').dirty">
          <ion-col>
            <p color="danger" ion-text *ngIf="myForm.get('titulo').hasError('required')">El campo título es requerido</p>
          </ion-col>
        </ion-row>
        <ion-row class="campos-textpublicar">
          <ion-col>
            <ion-textarea class="campos-textpublicar2" formControlName="descripcion" style="background-color: #F2F2F2;" #myInput id="myInput"
              rows="5" maxLength="500" [(ngModel)]="article.descripcion" placeholder="Descripción del articulo"></ion-textarea>
          </ion-col>
        </ion-row>
        <ion-row *ngIf="myForm.get('descripcion').errors && myForm.get('descripcion').dirty">
          <ion-col>
            <p color="danger" ion-text *ngIf="myForm.get('descripcion').hasError('required')">El campo Descripción es requerido</p>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-item class="campos-publicar2">
              <ion-label>Categoria</ion-label>
              <ion-select formControlName="categoria" [(ngModel)]="article.categoria" cancelText="Cancelar">
                <ion-option>Vehículos</ion-option>
                <ion-option>Hogar y muebles</ion-option>
                <ion-option>Electrodomésticos</ion-option>
                <ion-option>Tecnología</ion-option>
                <ion-option>Máquinas y herramientas</ion-option>
                <ion-option>Propiedades</ion-option>
                <ion-option>Accesorios para vehículos</ion-option>
                <ion-option>Accesorios personales</ion-option>
                <ion-option>Videojuegos</ion-option>
                <ion-option>Ropa</ion-option>
              </ion-select>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-item class="campos-publicar2">
              <ion-label>Categorias de cambio</ion-label>
              <ion-select formControlName="categorias" [(ngModel)]="article.categorias" multiple="true" cancelText="Cancelar">
                <ion-option>Vehículos</ion-option>
                <ion-option>Hogar y muebles</ion-option>
                <ion-option>Electrodomésticos</ion-option>
                <ion-option>Tecnología</ion-option>
                <ion-option>Máquinas y herramientas</ion-option>
                <ion-option>Propiedades</ion-option>
                <ion-option>Accesorios para vehículos</ion-option>
                <ion-option>Accesorios personales</ion-option>
                <ion-option>Videojuegos</ion-option>
                <ion-option>Ropa</ion-option>
              </ion-select>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-item class="campos-publicar2">
              <ion-label>Rango precio</ion-label>
              <ion-select formControlName="rango" [(ngModel)]="article.rango" cancelText="Cancelar">
                <ion-option value="1">1-500 USD</ion-option>
                <ion-option value="2">500-1.000 USD</ion-option>
                <ion-option value="3">1.000-2.000 USD</ion-option>
                <ion-option value="4">2.000 USD o mayor</ion-option>
              </ion-select>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-item class="campos-publicar3">
              <ion-icon name="image" item-left></ion-icon>
              <input style="color:#ffff;" type="file" formControlName="imagen" multiple="true" (click)="alertaPrueba()" (change)="onImageChange()"
                [(ngModel)]="article.file" name="subir" value="" id="mainImage">
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-label style="font-size:12px; text-align:center;">Puedes subir máximo 3 imágenes</ion-label>
        <ion-row *ngIf="myForm.get('imagen').errors && myForm.get('imagen').dirty">
          <ion-col>
            <p color="danger" ion-text *ngIf="myForm.get('imagen').hasError('required')">El campo Imagen es requerido</p>
          </ion-col>
        </ion-row>
        <ion-row *ngIf="myForm.get('imagen').errors && myForm.get('imagen').dirty">
          <ion-col>
            <p color="danger" ion-text *ngIf="validationImage(article.imageUrl)">se debe subir al menos una imagen</p>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col *ngFor="let imagen of bigImg" col-4>
            <ion-item *ngIf="bigImg.length > 0" style="border-bottom: 0px solid #ccc;">
              <div style="height:80px;width: 80;">
                <img style="max-width: 100%;max-height: 100%; margin:auto;display:block;width: 100%;height: 100%;" src="{{imagen}}">-->
              </div>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <button ion-button block class="boton-publicar" (click)="publish(article)" [disabled]="myForm.invalid">Guardar</button>
          </ion-col>
        </ion-row>
      </ion-list>
    </form>

  </ion-scroll>
</ion-content>